# Бот для интеграции Telegram с notion

В рамках [урока](https://amorev.ru/telegram-notion-integration) был разработан данный репозиторий, в котором реализован бот, создающий задачу в backlog на каждое сообщение от администратора

## Инструкция по запуску

Для запуска необходимо склонировать репозиторий, установить зависимости, прописать переменные окружения и запустить

```bash
npm i
npm start
```

Также можно запустить через docker-compose, указав необходимые переменные окружения в .env

```base
docker-compose up -d --build
```

После чего можно писать вашему боту любые сообщения и он создаст из них задачи

## Обязательные переменные окружения для бота

NOTION_TOKEN - токен из Notion

NOTION_TASK_DB - идентификатор базы данных задач

Для корректной работы бот ожидает, что в базе задач Notion есть свойства:

- Name (title)
- TGAuthor (rich text)
- Status (select)
- Source (select)
- URL (url) — заполняется автоматически, если в сообщении есть ссылка

TELEGRAM_BOT_TOKEN - токен вашего Telegram бота

TELEGRAM_OWNER_ID - telegram id владельца

GROQ_TOKEN - токен API для Groq (Speech-to-Text). Нужен для расшифровки аудио/voice сообщений.
Этот же ключ используется для бесплатной LLM-саммаризации (генерация заголовка и TLDR) через Groq Chat Completions.

GROQ_LLM_MODEL - (опционально) модель Groq LLM для генерации заголовка и TLDR.
По умолчанию используется: llama-3.1-8b-instant
Чтобы поменять модель, укажите переменную окружения, например:
GROQ_LLM_MODEL=llama-3.1-70b-versatile

## Возможность отправлять задачи другими постановщиками

При необходимости, можно дать возможность ставить задачи другим пользователям. Для этого в переменную окружения TELEGRAM_ALLOW_IDS, через запятую, необходимо указать Telegram id пользователей.

TELEGRAM_ALLOW_IDS=ID1,ID2,ID3

---
